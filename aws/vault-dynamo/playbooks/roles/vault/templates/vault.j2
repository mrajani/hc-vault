storage "dynamodb" {
  ha_enabled = "true"
  region = "${VAULT_CLUSTER_REGION}"
  table = "${VAULT_DYNAMODB_TABLE}"
}

api_addr          = "https://{{ ansible_default_ipv4.address }}:8200"
cluster_addr      = "https://{{ ansible_default_ipv4.address }}:8201"

listener "tcp" {
  address         = "{{ ansible_default_ipv4.address }}:8200"
  cluster_address = "{{ ansible_default_ipv4.address }}:8201"
  tls_cert_file   = "/etc/vault.d/certs.crt.pem"
  tls_key_file    = "/etc/vault.d/certs.key.pem"
  tls_min_version = "tls12"
  tls_disable     = false
}

seal "awskms" {
  region     = "{{ aws_region }}"
  kms_key_id = "{{ aws_kms_key }}"
}

ui                = true
default_lease_ttl = "1h"
cluster_name      = "Vault-DynamoDB"
